"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var _dec,_class,_class2,_temp,React=_interopDefault(require("react")),PropTypes=_interopDefault(require("prop-types")),reactI18next=require("react-i18next"),wretch=_interopDefault(require("wretch")),i18n=_interopDefault(require("i18next"));function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){return function n(r,o){try{var i=t[r](o),s=i.value}catch(e){return void a(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}let Home=(_dec=reactI18next.translate(["commons","index"]))((_temp=_class2=class extends React.Component{constructor(e){var t,a;t=super(e),this.handleInputChange=(e=>{this.setState({[e.target.name]:e.target.value})}),this.handleSubmit=(a=_asyncToGenerator(function*(e){e.preventDefault(),t.setState({isLoading:!0}),yield t.login()}),function(e){return a.apply(this,arguments)}),this.login=(()=>{const e=document.querySelector("#login").getAttribute("action"),t={mail:document.querySelector('input[name="mail"]').value,password:document.querySelector('input[name="password"]').value};wretch(e).options({credentials:"same-origin"}).formUrl(t).post().error(400,()=>{this.setState({hasError:!0,isLoading:!1})}).json(()=>{location.href="/w"}).catch(()=>{this.setState({hasError:!0,isLoading:!1})})}),this.state={mail:"",password:"",isLoading:!1,hasError:!1}}render(){const{t:e}=this.props;return React.createElement("form",{id:"login",action:"/login",method:"POST",noValidate:!0,onSubmit:this.handleSubmit},React.createElement("img",{src:"http://via.placeholder.com/260x390",width:"260",height:"390",alt:""}),this.state.hasError&&React.createElement("div",{className:"callout alert"},e("callout:invalidLogin")),React.createElement("input",{type:"email",name:"mail",placeholder:e("index:mailPlaceholder"),onChange:this.handleInputChange,disabled:this.state.isLoading,className:`${this.state.hasError?"error":""}`,autoComplete:"on"}),React.createElement("input",{type:"password",name:"password",placeholder:e("index:pwdPlaceholder"),onChange:this.handleInputChange,disabled:this.state.isLoading,className:`${this.state.hasError?"error":""}`,autoComplete:"off"}),React.createElement("input",{type:"submit",value:e("index:submit"),disabled:this.state.isLoading}))}},_class2.propTypes={t:PropTypes.func.isRequired},_class=_temp))||_class;const commons={home:{title:"hello home"}},home={title:"title"},locales={commons:commons,home:home},i18nCfg={lng:"fr",fallbackLng:"fr",debug:!1,ns:["commons","home","nav"],defaultNS:"commons",interpolation:{escapeValue:!1},react:{wait:!1,nsMode:"default"},resources:{fr:locales}};i18n.init(i18nCfg);let HomeContainer=class extends React.Component{render(){return React.createElement(reactI18next.I18nextProvider,{i18n:i18n},React.createElement(Home,null))}};module.exports=HomeContainer;
//# sourceMappingURL=home.ssr.js.map
